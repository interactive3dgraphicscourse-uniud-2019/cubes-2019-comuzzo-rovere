<html>
	<head>
		<title>Starting Code for 1st Project 2017</title>
		<style>
		
		body {
			font-family: Monospace;
			background-color: #f0f0f0;
			margin: 0px;
			overflow: hidden;
		}
		
		canvas { 
			width: 100%; 
			height: 100%;
		}
	
	</style>
		<script src="lib/three.min.js"></script>
		<script src="lib/stats.min.js"></script>
		<script src="lib/Coordinates.js"></script>
		<script src="lib/OrbitControls.js"></script>
		<script src="Semaforo.js"></script>
		<script src="Linee.js"></script>
		<script src="Car.js"></script>
		<script src="lib/dat.gui.min.js"></script>
	</head>
	<body>
		
		<script>
		RAD_TO_DEG_COEFF = Math.PI/180;
		ANGLE_90 = 90 * RAD_TO_DEG_COEFF;
		ANGLE_180 = 180 * RAD_TO_DEG_COEFF;
		ANGLE_270 = 270 * RAD_TO_DEG_COEFF;
		
		var crossroadRadius = 7;
		var roadLength = 27;
		var scene, camera, renderer, controls, stats;
		var dummyNE = new THREE.Object3D();
		dummyNE.position.x =9;
		dummyNE.position.z =-9;
		var dummyNW = new THREE.Object3D();
		dummyNW.position.x =-9;
		dummyNW.position.z =-9;
		var dummySE = new THREE.Object3D();
		dummySE.position.x =9;
		dummySE.position.z =9;
		var dummySW = new THREE.Object3D();
		dummySW.position.x =-9;
		dummySW.position.z =9;



		var options = {
  		
			VerdeSuZ: function() {
			sud.setState(TRAFFIC_LIGHT_STATES.GREEN.VAL);
			nord.setState(TRAFFIC_LIGHT_STATES.GREEN.VAL);
			est.setState(TRAFFIC_LIGHT_STATES.RED.VAL);
			ovest.setState(TRAFFIC_LIGHT_STATES.RED.VAL);
		  },
		  VerdeSuX: function() {
			sud.setState(TRAFFIC_LIGHT_STATES.RED.VAL);
			nord.setState(TRAFFIC_LIGHT_STATES.RED.VAL);
			est.setState(TRAFFIC_LIGHT_STATES.GREEN.VAL);
			ovest.setState(TRAFFIC_LIGHT_STATES.GREEN.VAL);
		  },

	};
	
	var gui = new dat.GUI();
	gui.add(options, 'VerdeSuZ');
	gui.add(options, 'VerdeSuX');	
				
				
				
				



		function Start() {
			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

			renderer = new THREE.WebGLRenderer( {antialias: true} );
			renderer.setSize( window.innerWidth, window.innerHeight );
			renderer.setClearColor( 0xf0f0f0 );
			document.body.appendChild( renderer.domElement );
			
			camera.position.set(3,4,6);
			camera.lookAt( new THREE.Vector3(0,0,0));
			
			stats = new Stats();
			stats.domElement.style.position = 'absolute';
			stats.domElement.style.top = '0px';
			document.body.appendChild( stats.domElement );
			
			controls = new THREE.OrbitControls( camera );
			controls.addEventListener( 'change', Render );
			camera.position.z=20;	
		}

		function Update() {
			
			requestAnimationFrame( Update );
			Mac.move('N',0.01);
			Mac2.PercorsoStoW(dummySW);
			Mac3.PercorsoWtoN(dummyNW);
			controls.update();  
			stats.update();
			Render();
		}
		
		function Render() {
			renderer.render(scene, camera);
		}
		
		Start();
		var crossroad = new CrossroadStreet(crossroadRadius, roadLength);
		scene.add(crossroad.mainParent);
		
		var sud = new trafficLight(7,7, 0 * Math.PI/180);
		sud.setState(TRAFFIC_LIGHT_STATES.GREEN.VAL);
		scene.add(sud.mainParent);

		var est = new trafficLight(7,-7, 90 * Math.PI/180);
		est.setState(TRAFFIC_LIGHT_STATES.RED.VAL);
		scene.add(est.mainParent);

		var nord = new trafficLight(-7,-7, 180 * Math.PI/180);
		nord.setState(TRAFFIC_LIGHT_STATES.GREEN.VAL);
		scene.add(nord.mainParent);

		var ovest = new trafficLight(-7,7, 270 * Math.PI/180);
		ovest.setState(TRAFFIC_LIGHT_STATES.RED.VAL);
		scene.add(ovest.mainParent);

		var Mac=new Car();
		Mac.Corpo.position.x=4;
		Mac.Corpo.position.z=15;
		
		var Mac2=new Car();
		Mac2.Corpo.position.z=11;
		Mac2.Corpo.position.x=11;
		dummySW.add( Mac2.Corpo );
		
		var Mac3=new Car();
		Mac3.Corpo.rotation.y=90 * Math.PI/180;
		Mac3.Corpo.position.z=12;
		Mac3.Corpo.position.x=-12;
		dummyNW.add(Mac3.Corpo);

		scene.add( dummyNE );
		scene.add( dummyNW );
		scene.add( dummySE );
		scene.add( dummySW );
		Update();
			
		</script>
	</body>
</html>